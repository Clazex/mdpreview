var app=new Vue({el:"#app",data:{urlInput:"https://cdn.jsdelivr.net/gh/Sciencmine/mdpreview@latest/example.md",source:"",compiled:"",showSource:!1,shouldSanitize:!0,statusCode:200,langs:[{displayName:"English",url:"./"},{displayName:"简体中文",url:"zh-cn"},{displayName:"繁體中文",url:"zh-tw"}],langChoice:""},methods:{loadMd:function(){superagent.get(app.urlInput).end((function(error,response){null===error?(200!==response.statusCode&&alert("Error "+response.statusCode+"\n\n"+response.text),app.statusCode=response.statusCode,app.source=response.text,app.compile()):alert(error)}))},compile:function(){var markedProcessed=marked(app.source);app.shouldSanitize?app.compiled=DOMPurify.sanitize(markedProcessed):app.compiled=markedProcessed},changeLang:function(){for(var i=0;i<this.langs.length;i++)if(this.langs[i].displayName===this.langChoice)return void(window.location.href=this.langs[i].url);alert("Unknown Language!")},loadQuery:function(){if(window.location.search.length>1){var searchList=window.location.search;searchList[0]="&";for(var j,i=0,parseFinished=!1;!parseFinished&&i>=0;){if(-1===(j=searchList.indexOf("=",i))){alert("Error parsing queries!");break}var key=searchList.substr(i+1,j-i-1);switch(-1===(i=searchList.indexOf("&",j))&&(parseFinished=!0,i=searchList.length),key){case"source":app.showSource="true"===searchList.substr(j+1,i-j-1);break;case"sanitize":app.shouldSanitize="true"===searchList.substr(j+1,i-j-1);break;case"url":i=-2;break;default:return void alert("Unknown query key: "+key)}}-2===i&&(this.urlInput=unescape(searchList.substr(j+1)),this.loadMd())}}}});